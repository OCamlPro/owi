<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>cmd_sym.ml &mdash; Coverage report</title>
    <meta name="description" content="82.26% coverage in src/cmd/cmd_sym.ml">
    <link rel="stylesheet" href="../../coverage.css"/>
    <script src="../../highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <div id="header">
      <h1>
        <a href="../../index.html">
          <span class="dirname">src/cmd/</span>cmd_sym.ml
        </a>
      </h1>
      <h2>82.26%</h2>
    </div>
    <div id="navbar">
      <span class="unvisited" style="top:12.46%"></span>
      <span class="unvisited" style="top:20.40%"></span>
      <span class="unvisited" style="top:20.96%"></span>
      <span class="unvisited" style="top:21.53%"></span>
      <span class="unvisited" style="top:22.38%"></span>
      <span class="unvisited" style="top:22.95%"></span>
      <span class="unvisited" style="top:23.23%"></span>
      <span class="unvisited" style="top:24.36%"></span>
      <span class="unvisited" style="top:24.65%"></span>
      <span class="unvisited" style="top:25.21%"></span>
      <span class="unvisited" style="top:25.50%"></span>
      <span class="unvisited" style="top:25.78%"></span>
      <span class="unvisited" style="top:26.06%"></span>
      <span class="unvisited" style="top:27.20%"></span>
      <span class="unvisited" style="top:27.48%"></span>
      <span class="unvisited" style="top:28.05%"></span>
      <span class="unvisited" style="top:28.61%"></span>
      <span class="unvisited" style="top:28.90%"></span>
      <span class="unvisited" style="top:29.18%"></span>
      <span class="unvisited" style="top:30.31%"></span>
      <span class="some-visited" style="top:45.89%"></span>
      <span class="some-visited" style="top:46.46%"></span>
      <span class="unvisited" style="top:47.88%"></span>
      <span class="unvisited" style="bottom:36.26%"></span>
      <span class="some-visited" style="bottom:26.35%"></span>
      <span class="some-visited" style="bottom:23.51%"></span>
      <span class="unvisited" style="bottom:21.25%"></span>
      <span class="unvisited" style="bottom:20.68%"></span>
      <span class="unvisited" style="bottom:20.40%"></span>
    </div>
    <div id="report">
      <div id="lines-layer">
        <pre>
<a id="L1"></a><span > </span>
<a id="L2"></a><span > </span>
<a id="L3"></a><span > </span>
<a id="L4"></a><span > </span>
<a id="L5"></a><span > </span>
<a id="L6"></a><span > </span>
<a id="L7"></a><span > </span>
<a id="L8"></a><span > </span>
<a id="L9"></a><span > </span>
<a id="L10"></a><span > </span>
<a id="L11"></a><span > </span>
<a id="L12"></a><span > </span>
<a id="L13"></a><span > </span>
<a id="L14"></a><span > </span>
<a id="L15"></a><span > </span>
<a id="L16"></a><span > </span>
<a id="L17"></a><span > </span>
<a id="L18"></a><span > </span>
<a id="L19"></a><span > </span>
<a id="L20"></a><span > </span>
<a id="L21"></a><span > </span>
<a id="L22"></a><span > </span>
<a id="L23"></a><span > </span>
<a id="L24"></a><span > </span>
<a id="L25"></a><span > </span>
<a id="L26"></a><span > </span>
<a id="L27"></a><span > </span>
<a id="L28"></a><span > </span>
<a id="L29"></a><span > </span>
<a id="L30"></a><span > </span>
<a id="L31"></a><span > </span>
<a id="L32"></a><span > </span>
<a id="L33"></a><span > </span>
<a id="L34"></a><span > </span>
<a id="L35"></a><span > </span>
<a id="L36"></a><span > </span>
<a id="L37"></a><span > </span>
<a id="L38"></a><span > </span>
<a id="L39"></a><span class="visited"> </span>
<a id="L40"></a><span > </span>
<a id="L41"></a><span > </span>
<a id="L42"></a><span class="visited"> </span>
<a id="L43"></a><span class="visited"> </span>
<a id="L44"></a><span class="unvisited"> </span>
<a id="L45"></a><span class="visited"> </span>
<a id="L46"></a><span class="visited"> </span>
<a id="L47"></a><span class="visited"> </span>
<a id="L48"></a><span > </span>
<a id="L49"></a><span > </span>
<a id="L50"></a><span > </span>
<a id="L51"></a><span > </span>
<a id="L52"></a><span > </span>
<a id="L53"></a><span > </span>
<a id="L54"></a><span class="visited"> </span>
<a id="L55"></a><span > </span>
<a id="L56"></a><span > </span>
<a id="L57"></a><span > </span>
<a id="L58"></a><span class="visited"> </span>
<a id="L59"></a><span > </span>
<a id="L60"></a><span > </span>
<a id="L61"></a><span > </span>
<a id="L62"></a><span class="visited"> </span>
<a id="L63"></a><span > </span>
<a id="L64"></a><span class="visited"> </span>
<a id="L65"></a><span class="visited"> </span>
<a id="L66"></a><span class="visited"> </span>
<a id="L67"></a><span > </span>
<a id="L68"></a><span > </span>
<a id="L69"></a><span > </span>
<a id="L70"></a><span class="visited"> </span>
<a id="L71"></a><span class="visited"> </span>
<a id="L72"></a><span class="unvisited"> </span>
<a id="L73"></a><span > </span>
<a id="L74"></a><span class="unvisited"> </span>
<a id="L75"></a><span > </span>
<a id="L76"></a><span class="unvisited"> </span>
<a id="L77"></a><span > </span>
<a id="L78"></a><span > </span>
<a id="L79"></a><span class="unvisited"> </span>
<a id="L80"></a><span > </span>
<a id="L81"></a><span class="unvisited"> </span>
<a id="L82"></a><span class="unvisited"> </span>
<a id="L83"></a><span > </span>
<a id="L84"></a><span > </span>
<a id="L85"></a><span > </span>
<a id="L86"></a><span class="unvisited"> </span>
<a id="L87"></a><span class="unvisited"> </span>
<a id="L88"></a><span > </span>
<a id="L89"></a><span class="unvisited"> </span>
<a id="L90"></a><span class="unvisited"> </span>
<a id="L91"></a><span class="unvisited"> </span>
<a id="L92"></a><span class="unvisited"> </span>
<a id="L93"></a><span > </span>
<a id="L94"></a><span > </span>
<a id="L95"></a><span > </span>
<a id="L96"></a><span class="unvisited"> </span>
<a id="L97"></a><span class="unvisited"> </span>
<a id="L98"></a><span > </span>
<a id="L99"></a><span class="unvisited"> </span>
<a id="L100"></a><span > </span>
<a id="L101"></a><span class="unvisited"> </span>
<a id="L102"></a><span class="unvisited"> </span>
<a id="L103"></a><span class="unvisited"> </span>
<a id="L104"></a><span > </span>
<a id="L105"></a><span > </span>
<a id="L106"></a><span > </span>
<a id="L107"></a><span class="unvisited"> </span>
<a id="L108"></a><span > </span>
<a id="L109"></a><span > </span>
<a id="L110"></a><span class="visited"> </span>
<a id="L111"></a><span > </span>
<a id="L112"></a><span class="visited"> </span>
<a id="L113"></a><span class="visited"> </span>
<a id="L114"></a><span > </span>
<a id="L115"></a><span > </span>
<a id="L116"></a><span > </span>
<a id="L117"></a><span class="visited"> </span>
<a id="L118"></a><span > </span>
<a id="L119"></a><span class="visited"> </span>
<a id="L120"></a><span class="visited"> </span>
<a id="L121"></a><span > </span>
<a id="L122"></a><span > </span>
<a id="L123"></a><span > </span>
<a id="L124"></a><span > </span>
<a id="L125"></a><span > </span>
<a id="L126"></a><span > </span>
<a id="L127"></a><span > </span>
<a id="L128"></a><span class="visited"> </span>
<a id="L129"></a><span class="visited"> </span>
<a id="L130"></a><span > </span>
<a id="L131"></a><span > </span>
<a id="L132"></a><span > </span>
<a id="L133"></a><span class="visited"> </span>
<a id="L134"></a><span > </span>
<a id="L135"></a><span > </span>
<a id="L136"></a><span > </span>
<a id="L137"></a><span class="visited"> </span>
<a id="L138"></a><span > </span>
<a id="L139"></a><span > </span>
<a id="L140"></a><span > </span>
<a id="L141"></a><span class="visited"> </span>
<a id="L142"></a><span > </span>
<a id="L143"></a><span class="visited"> </span>
<a id="L144"></a><span > </span>
<a id="L145"></a><span class="visited"> </span>
<a id="L146"></a><span class="visited"> </span>
<a id="L147"></a><span > </span>
<a id="L148"></a><span > </span>
<a id="L149"></a><span > </span>
<a id="L150"></a><span > </span>
<a id="L151"></a><span > </span>
<a id="L152"></a><span > </span>
<a id="L153"></a><span class="visited"> </span>
<a id="L154"></a><span > </span>
<a id="L155"></a><span > </span>
<a id="L156"></a><span > </span>
<a id="L157"></a><span class="visited"> </span>
<a id="L158"></a><span > </span>
<a id="L159"></a><span > </span>
<a id="L160"></a><span > </span>
<a id="L161"></a><span > </span>
<a id="L162"></a><span class="some-visited"> </span>
<a id="L163"></a><span > </span>
<a id="L164"></a><span class="some-visited"> </span>
<a id="L165"></a><span > </span>
<a id="L166"></a><span > </span>
<a id="L167"></a><span > </span>
<a id="L168"></a><span class="visited"> </span>
<a id="L169"></a><span class="unvisited"> </span>
<a id="L170"></a><span > </span>
<a id="L171"></a><span > </span>
<a id="L172"></a><span class="visited"> </span>
<a id="L173"></a><span > </span>
<a id="L174"></a><span class="visited"> </span>
<a id="L175"></a><span class="visited"> </span>
<a id="L176"></a><span class="visited"> </span>
<a id="L177"></a><span > </span>
<a id="L178"></a><span class="visited"> </span>
<a id="L179"></a><span > </span>
<a id="L180"></a><span class="visited"> </span>
<a id="L181"></a><span > </span>
<a id="L182"></a><span > </span>
<a id="L183"></a><span > </span>
<a id="L184"></a><span class="visited"> </span>
<a id="L185"></a><span class="visited"> </span>
<a id="L186"></a><span class="visited"> </span>
<a id="L187"></a><span > </span>
<a id="L188"></a><span class="visited"> </span>
<a id="L189"></a><span class="visited"> </span>
<a id="L190"></a><span class="visited"> </span>
<a id="L191"></a><span > </span>
<a id="L192"></a><span > </span>
<a id="L193"></a><span > </span>
<a id="L194"></a><span class="visited"> </span>
<a id="L195"></a><span class="visited"> </span>
<a id="L196"></a><span class="visited"> </span>
<a id="L197"></a><span class="visited"> </span>
<a id="L198"></a><span > </span>
<a id="L199"></a><span class="visited"> </span>
<a id="L200"></a><span class="visited"> </span>
<a id="L201"></a><span > </span>
<a id="L202"></a><span > </span>
<a id="L203"></a><span > </span>
<a id="L204"></a><span > </span>
<a id="L205"></a><span > </span>
<a id="L206"></a><span class="visited"> </span>
<a id="L207"></a><span > </span>
<a id="L208"></a><span class="visited"> </span>
<a id="L209"></a><span > </span>
<a id="L210"></a><span > </span>
<a id="L211"></a><span class="visited"> </span>
<a id="L212"></a><span class="visited"> </span>
<a id="L213"></a><span class="visited"> </span>
<a id="L214"></a><span class="visited"> </span>
<a id="L215"></a><span > </span>
<a id="L216"></a><span > </span>
<a id="L217"></a><span class="visited"> </span>
<a id="L218"></a><span > </span>
<a id="L219"></a><span > </span>
<a id="L220"></a><span class="visited"> </span>
<a id="L221"></a><span > </span>
<a id="L222"></a><span > </span>
<a id="L223"></a><span > </span>
<a id="L224"></a><span class="visited"> </span>
<a id="L225"></a><span class="unvisited"> </span>
<a id="L226"></a><span > </span>
<a id="L227"></a><span class="visited"> </span>
<a id="L228"></a><span class="visited"> </span>
<a id="L229"></a><span > </span>
<a id="L230"></a><span class="visited"> </span>
<a id="L231"></a><span class="visited"> </span>
<a id="L232"></a><span class="visited"> </span>
<a id="L233"></a><span > </span>
<a id="L234"></a><span class="visited"> </span>
<a id="L235"></a><span > </span>
<a id="L236"></a><span > </span>
<a id="L237"></a><span > </span>
<a id="L238"></a><span > </span>
<a id="L239"></a><span class="visited"> </span>
<a id="L240"></a><span class="visited"> </span>
<a id="L241"></a><span class="visited"> </span>
<a id="L242"></a><span class="visited"> </span>
<a id="L243"></a><span class="visited"> </span>
<a id="L244"></a><span class="visited"> </span>
<a id="L245"></a><span class="visited"> </span>
<a id="L246"></a><span class="visited"> </span>
<a id="L247"></a><span > </span>
<a id="L248"></a><span > </span>
<a id="L249"></a><span > </span>
<a id="L250"></a><span > </span>
<a id="L251"></a><span > </span>
<a id="L252"></a><span class="visited"> </span>
<a id="L253"></a><span class="visited"> </span>
<a id="L254"></a><span class="visited"> </span>
<a id="L255"></a><span class="visited"> </span>
<a id="L256"></a><span class="visited"> </span>
<a id="L257"></a><span > </span>
<a id="L258"></a><span class="visited"> </span>
<a id="L259"></a><span class="visited"> </span>
<a id="L260"></a><span class="some-visited"> </span>
<a id="L261"></a><span > </span>
<a id="L262"></a><span > </span>
<a id="L263"></a><span > </span>
<a id="L264"></a><span > </span>
<a id="L265"></a><span class="visited"> </span>
<a id="L266"></a><span > </span>
<a id="L267"></a><span > </span>
<a id="L268"></a><span > </span>
<a id="L269"></a><span > </span>
<a id="L270"></a><span class="some-visited"> </span>
<a id="L271"></a><span > </span>
<a id="L272"></a><span > </span>
<a id="L273"></a><span class="visited"> </span>
<a id="L274"></a><span class="visited"> </span>
<a id="L275"></a><span > </span>
<a id="L276"></a><span > </span>
<a id="L277"></a><span > </span>
<a id="L278"></a><span class="unvisited"> </span>
<a id="L279"></a><span class="visited"> </span>
<a id="L280"></a><span class="unvisited"> </span>
<a id="L281"></a><span class="unvisited"> </span>
<a id="L282"></a><span > </span>
<a id="L283"></a><span class="visited"> </span>
<a id="L284"></a><span class="visited"> </span>
<a id="L285"></a><span > </span>
<a id="L286"></a><span class="visited"> </span>
<a id="L287"></a><span > </span>
<a id="L288"></a><span class="visited"> </span>
<a id="L289"></a><span > </span>
<a id="L290"></a><span class="visited"> </span>
<a id="L291"></a><span > </span>
<a id="L292"></a><span > </span>
<a id="L293"></a><span > </span>
<a id="L294"></a><span class="visited"> </span>
<a id="L295"></a><span class="visited"> </span>
<a id="L296"></a><span class="visited"> </span>
<a id="L297"></a><span > </span>
<a id="L298"></a><span > </span>
<a id="L299"></a><span > </span>
<a id="L300"></a><span > </span>
<a id="L301"></a><span class="visited"> </span>
<a id="L302"></a><span > </span>
<a id="L303"></a><span class="visited"> </span>
<a id="L304"></a><span class="visited"> </span>
<a id="L305"></a><span > </span>
<a id="L306"></a><span class="visited"> </span>
<a id="L307"></a><span > </span>
<a id="L308"></a><span > </span>
<a id="L309"></a><span class="visited"> </span>
<a id="L310"></a><span > </span>
<a id="L311"></a><span > </span>
<a id="L312"></a><span class="visited"> </span>
<a id="L313"></a><span class="visited"> </span>
<a id="L314"></a><span > </span>
<a id="L315"></a><span > </span>
<a id="L316"></a><span > </span>
<a id="L317"></a><span > </span>
<a id="L318"></a><span > </span>
<a id="L319"></a><span > </span>
<a id="L320"></a><span class="visited"> </span>
<a id="L321"></a><span > </span>
<a id="L322"></a><span class="visited"> </span>
<a id="L323"></a><span > </span>
<a id="L324"></a><span > </span>
<a id="L325"></a><span > </span>
<a id="L326"></a><span > </span>
<a id="L327"></a><span > </span>
<a id="L328"></a><span > </span>
<a id="L329"></a><span > </span>
<a id="L330"></a><span > </span>
<a id="L331"></a><span > </span>
<a id="L332"></a><span > </span>
<a id="L333"></a><span > </span>
<a id="L334"></a><span > </span>
<a id="L335"></a><span > </span>
<a id="L336"></a><span > </span>
<a id="L337"></a><span > </span>
<a id="L338"></a><span > </span>
<a id="L339"></a><span > </span>
<a id="L340"></a><span class="visited"> </span>
<a id="L341"></a><span > </span>
<a id="L342"></a><span > </span>
<a id="L343"></a><span > </span>
<a id="L344"></a><span > </span>
<a id="L345"></a><span > </span>
<a id="L346"></a><span class="visited"> </span>
<a id="L347"></a><span class="visited"> </span>
<a id="L348"></a><span > </span>
<a id="L349"></a><span > </span>
<a id="L350"></a><span class="visited"> </span>
<a id="L351"></a><span > </span>
<a id="L352"></a><span > </span>
<a id="L353"></a><span > </span>
</pre>
      </div>
      <div id="text-layer">
        <pre id="line-numbers">
<a href="#L1">  1</a>
<a href="#L2">  2</a>
<a href="#L3">  3</a>
<a href="#L4">  4</a>
<a href="#L5">  5</a>
<a href="#L6">  6</a>
<a href="#L7">  7</a>
<a href="#L8">  8</a>
<a href="#L9">  9</a>
<a href="#L10"> 10</a>
<a href="#L11"> 11</a>
<a href="#L12"> 12</a>
<a href="#L13"> 13</a>
<a href="#L14"> 14</a>
<a href="#L15"> 15</a>
<a href="#L16"> 16</a>
<a href="#L17"> 17</a>
<a href="#L18"> 18</a>
<a href="#L19"> 19</a>
<a href="#L20"> 20</a>
<a href="#L21"> 21</a>
<a href="#L22"> 22</a>
<a href="#L23"> 23</a>
<a href="#L24"> 24</a>
<a href="#L25"> 25</a>
<a href="#L26"> 26</a>
<a href="#L27"> 27</a>
<a href="#L28"> 28</a>
<a href="#L29"> 29</a>
<a href="#L30"> 30</a>
<a href="#L31"> 31</a>
<a href="#L32"> 32</a>
<a href="#L33"> 33</a>
<a href="#L34"> 34</a>
<a href="#L35"> 35</a>
<a href="#L36"> 36</a>
<a href="#L37"> 37</a>
<a href="#L38"> 38</a>
<a href="#L39"> 39</a>
<a href="#L40"> 40</a>
<a href="#L41"> 41</a>
<a href="#L42"> 42</a>
<a href="#L43"> 43</a>
<a href="#L44"> 44</a>
<a href="#L45"> 45</a>
<a href="#L46"> 46</a>
<a href="#L47"> 47</a>
<a href="#L48"> 48</a>
<a href="#L49"> 49</a>
<a href="#L50"> 50</a>
<a href="#L51"> 51</a>
<a href="#L52"> 52</a>
<a href="#L53"> 53</a>
<a href="#L54"> 54</a>
<a href="#L55"> 55</a>
<a href="#L56"> 56</a>
<a href="#L57"> 57</a>
<a href="#L58"> 58</a>
<a href="#L59"> 59</a>
<a href="#L60"> 60</a>
<a href="#L61"> 61</a>
<a href="#L62"> 62</a>
<a href="#L63"> 63</a>
<a href="#L64"> 64</a>
<a href="#L65"> 65</a>
<a href="#L66"> 66</a>
<a href="#L67"> 67</a>
<a href="#L68"> 68</a>
<a href="#L69"> 69</a>
<a href="#L70"> 70</a>
<a href="#L71"> 71</a>
<a href="#L72"> 72</a>
<a href="#L73"> 73</a>
<a href="#L74"> 74</a>
<a href="#L75"> 75</a>
<a href="#L76"> 76</a>
<a href="#L77"> 77</a>
<a href="#L78"> 78</a>
<a href="#L79"> 79</a>
<a href="#L80"> 80</a>
<a href="#L81"> 81</a>
<a href="#L82"> 82</a>
<a href="#L83"> 83</a>
<a href="#L84"> 84</a>
<a href="#L85"> 85</a>
<a href="#L86"> 86</a>
<a href="#L87"> 87</a>
<a href="#L88"> 88</a>
<a href="#L89"> 89</a>
<a href="#L90"> 90</a>
<a href="#L91"> 91</a>
<a href="#L92"> 92</a>
<a href="#L93"> 93</a>
<a href="#L94"> 94</a>
<a href="#L95"> 95</a>
<a href="#L96"> 96</a>
<a href="#L97"> 97</a>
<a href="#L98"> 98</a>
<a href="#L99"> 99</a>
<a href="#L100">100</a>
<a href="#L101">101</a>
<a href="#L102">102</a>
<a href="#L103">103</a>
<a href="#L104">104</a>
<a href="#L105">105</a>
<a href="#L106">106</a>
<a href="#L107">107</a>
<a href="#L108">108</a>
<a href="#L109">109</a>
<a href="#L110">110</a>
<a href="#L111">111</a>
<a href="#L112">112</a>
<a href="#L113">113</a>
<a href="#L114">114</a>
<a href="#L115">115</a>
<a href="#L116">116</a>
<a href="#L117">117</a>
<a href="#L118">118</a>
<a href="#L119">119</a>
<a href="#L120">120</a>
<a href="#L121">121</a>
<a href="#L122">122</a>
<a href="#L123">123</a>
<a href="#L124">124</a>
<a href="#L125">125</a>
<a href="#L126">126</a>
<a href="#L127">127</a>
<a href="#L128">128</a>
<a href="#L129">129</a>
<a href="#L130">130</a>
<a href="#L131">131</a>
<a href="#L132">132</a>
<a href="#L133">133</a>
<a href="#L134">134</a>
<a href="#L135">135</a>
<a href="#L136">136</a>
<a href="#L137">137</a>
<a href="#L138">138</a>
<a href="#L139">139</a>
<a href="#L140">140</a>
<a href="#L141">141</a>
<a href="#L142">142</a>
<a href="#L143">143</a>
<a href="#L144">144</a>
<a href="#L145">145</a>
<a href="#L146">146</a>
<a href="#L147">147</a>
<a href="#L148">148</a>
<a href="#L149">149</a>
<a href="#L150">150</a>
<a href="#L151">151</a>
<a href="#L152">152</a>
<a href="#L153">153</a>
<a href="#L154">154</a>
<a href="#L155">155</a>
<a href="#L156">156</a>
<a href="#L157">157</a>
<a href="#L158">158</a>
<a href="#L159">159</a>
<a href="#L160">160</a>
<a href="#L161">161</a>
<a href="#L162">162</a>
<a href="#L163">163</a>
<a href="#L164">164</a>
<a href="#L165">165</a>
<a href="#L166">166</a>
<a href="#L167">167</a>
<a href="#L168">168</a>
<a href="#L169">169</a>
<a href="#L170">170</a>
<a href="#L171">171</a>
<a href="#L172">172</a>
<a href="#L173">173</a>
<a href="#L174">174</a>
<a href="#L175">175</a>
<a href="#L176">176</a>
<a href="#L177">177</a>
<a href="#L178">178</a>
<a href="#L179">179</a>
<a href="#L180">180</a>
<a href="#L181">181</a>
<a href="#L182">182</a>
<a href="#L183">183</a>
<a href="#L184">184</a>
<a href="#L185">185</a>
<a href="#L186">186</a>
<a href="#L187">187</a>
<a href="#L188">188</a>
<a href="#L189">189</a>
<a href="#L190">190</a>
<a href="#L191">191</a>
<a href="#L192">192</a>
<a href="#L193">193</a>
<a href="#L194">194</a>
<a href="#L195">195</a>
<a href="#L196">196</a>
<a href="#L197">197</a>
<a href="#L198">198</a>
<a href="#L199">199</a>
<a href="#L200">200</a>
<a href="#L201">201</a>
<a href="#L202">202</a>
<a href="#L203">203</a>
<a href="#L204">204</a>
<a href="#L205">205</a>
<a href="#L206">206</a>
<a href="#L207">207</a>
<a href="#L208">208</a>
<a href="#L209">209</a>
<a href="#L210">210</a>
<a href="#L211">211</a>
<a href="#L212">212</a>
<a href="#L213">213</a>
<a href="#L214">214</a>
<a href="#L215">215</a>
<a href="#L216">216</a>
<a href="#L217">217</a>
<a href="#L218">218</a>
<a href="#L219">219</a>
<a href="#L220">220</a>
<a href="#L221">221</a>
<a href="#L222">222</a>
<a href="#L223">223</a>
<a href="#L224">224</a>
<a href="#L225">225</a>
<a href="#L226">226</a>
<a href="#L227">227</a>
<a href="#L228">228</a>
<a href="#L229">229</a>
<a href="#L230">230</a>
<a href="#L231">231</a>
<a href="#L232">232</a>
<a href="#L233">233</a>
<a href="#L234">234</a>
<a href="#L235">235</a>
<a href="#L236">236</a>
<a href="#L237">237</a>
<a href="#L238">238</a>
<a href="#L239">239</a>
<a href="#L240">240</a>
<a href="#L241">241</a>
<a href="#L242">242</a>
<a href="#L243">243</a>
<a href="#L244">244</a>
<a href="#L245">245</a>
<a href="#L246">246</a>
<a href="#L247">247</a>
<a href="#L248">248</a>
<a href="#L249">249</a>
<a href="#L250">250</a>
<a href="#L251">251</a>
<a href="#L252">252</a>
<a href="#L253">253</a>
<a href="#L254">254</a>
<a href="#L255">255</a>
<a href="#L256">256</a>
<a href="#L257">257</a>
<a href="#L258">258</a>
<a href="#L259">259</a>
<a href="#L260">260</a>
<a href="#L261">261</a>
<a href="#L262">262</a>
<a href="#L263">263</a>
<a href="#L264">264</a>
<a href="#L265">265</a>
<a href="#L266">266</a>
<a href="#L267">267</a>
<a href="#L268">268</a>
<a href="#L269">269</a>
<a href="#L270">270</a>
<a href="#L271">271</a>
<a href="#L272">272</a>
<a href="#L273">273</a>
<a href="#L274">274</a>
<a href="#L275">275</a>
<a href="#L276">276</a>
<a href="#L277">277</a>
<a href="#L278">278</a>
<a href="#L279">279</a>
<a href="#L280">280</a>
<a href="#L281">281</a>
<a href="#L282">282</a>
<a href="#L283">283</a>
<a href="#L284">284</a>
<a href="#L285">285</a>
<a href="#L286">286</a>
<a href="#L287">287</a>
<a href="#L288">288</a>
<a href="#L289">289</a>
<a href="#L290">290</a>
<a href="#L291">291</a>
<a href="#L292">292</a>
<a href="#L293">293</a>
<a href="#L294">294</a>
<a href="#L295">295</a>
<a href="#L296">296</a>
<a href="#L297">297</a>
<a href="#L298">298</a>
<a href="#L299">299</a>
<a href="#L300">300</a>
<a href="#L301">301</a>
<a href="#L302">302</a>
<a href="#L303">303</a>
<a href="#L304">304</a>
<a href="#L305">305</a>
<a href="#L306">306</a>
<a href="#L307">307</a>
<a href="#L308">308</a>
<a href="#L309">309</a>
<a href="#L310">310</a>
<a href="#L311">311</a>
<a href="#L312">312</a>
<a href="#L313">313</a>
<a href="#L314">314</a>
<a href="#L315">315</a>
<a href="#L316">316</a>
<a href="#L317">317</a>
<a href="#L318">318</a>
<a href="#L319">319</a>
<a href="#L320">320</a>
<a href="#L321">321</a>
<a href="#L322">322</a>
<a href="#L323">323</a>
<a href="#L324">324</a>
<a href="#L325">325</a>
<a href="#L326">326</a>
<a href="#L327">327</a>
<a href="#L328">328</a>
<a href="#L329">329</a>
<a href="#L330">330</a>
<a href="#L331">331</a>
<a href="#L332">332</a>
<a href="#L333">333</a>
<a href="#L334">334</a>
<a href="#L335">335</a>
<a href="#L336">336</a>
<a href="#L337">337</a>
<a href="#L338">338</a>
<a href="#L339">339</a>
<a href="#L340">340</a>
<a href="#L341">341</a>
<a href="#L342">342</a>
<a href="#L343">343</a>
<a href="#L344">344</a>
<a href="#L345">345</a>
<a href="#L346">346</a>
<a href="#L347">347</a>
<a href="#L348">348</a>
<a href="#L349">349</a>
<a href="#L350">350</a>
<a href="#L351">351</a>
<a href="#L352">352</a>
<a href="#L353">353</a>
</pre>
<pre><code class="ocaml">(* SPDX-License-Identifier: AGPL-3.0-or-later *)
(* Copyright Â© 2021-2024 OCamlPro *)
(* Written by the Owi programmers *)

open Bos
open Syntax
module Expr = Smtml.Expr

type fail_mode =
  | Trap_only
  | Assertion_only
  | Both

type exploration_strategy =
  | FIFO
  | LIFO
  | Random
  | Smart

type parameters =
  { unsafe : bool
  ; workers : int
  ; no_stop_at_failure : bool
  ; no_value : bool
  ; no_assert_failure_expression_printing : bool
  ; deterministic_result_order : bool
  ; fail_mode : fail_mode
  ; exploration_strategy : exploration_strategy
  ; workspace : Fpath.t option
  ; solver : Smtml.Solver_type.t
  ; model_format : Cmd_utils.model_format
  ; entry_point : string option
  ; invoke_with_symbols : bool
  ; model_out_file : Fpath.t option
  ; with_breadcrumbs : bool
  }

let run_file ~parameters ~source_file =
  <span data-count="399">l</span>et { unsafe; entry_point; invoke_with_symbols; exploration_strategy; _ } =
    parameters
  in
  let* m = Compile.File.until_validat<span data-count="399">e</span> ~unsafe source_file in
  <span data-count="398">(</span> match exploration_strategy with
  | <span data-count="0">S</span>mart -&gt; Cmd_call_graph.compute_distance<span data-count="0">s</span> m entry_point
  | <span data-count="398">_</span> -&gt; () );
  let* m = Cmd_utils.set_entry_poin<span data-count="398">t</span> entry_point invoke_with_symbols m in
  <span data-count="397">l</span>et link_state =
    let func_typ = Symbolic.Extern_func.extern_type in
    let link_state = Link.empty_state in
    let link_state =
      Link.extern_module' link_state ~name:"wasi_snapshot_preview1" ~func_typ
        Symbolic_wasm_ffi.wasi_snapshot_preview1
    in
    <span data-count="397">l</span>et link_state =
      Link.extern_module' link_state ~name:"owi" ~func_typ
        Symbolic_wasm_ffi.symbolic_extern_module
    in
    <span data-count="397">l</span>ink_state
  in
  let+ m, link_state =
    (* unsafe is set to true because the module was already validated before *)
    Compile.Binary.until_lin<span data-count="397">k</span> ~unsafe:true ~name:None link_state m
  in
  <span data-count="397">l</span>et m = Symbolic.convert_module_to_run m in
  <span data-count="397">B</span>enchmark.with_utime @@ fun () -&gt;
  <span data-count="397">I</span>nterpret.Symbolic.modul ~timeout:None ~timeout_instr:None link_state.envs m

let print_bug ~model_format ~model_out_file ~id ~no_value ~no_stop_at_failure
  ~no_assert_failure_expression_printing ~with_breadcrumbs bug =
  <span data-count="237">l</span>et pp fmt (model, labels, breadcrumbs, scoped_values, stats) =
    <span data-count="237">m</span>atch model_format with
    | <span data-count="0">C</span>md_utils.Json -&gt;
      let json = Symbol_scope.to_json ~no_value model scoped_values in
      <span data-count="0">l</span>et labels_json =
        List.map
          (fun (id, name) -&gt; <span data-count="0">`</span>Assoc [ ("id", `Int id); ("name", `String name) ])
          labels
      in
      <span data-count="0">l</span>et json =
        match json with
        | <span data-count="0">`</span>Assoc fields -&gt; `Assoc (("labels", `List labels_json) :: fields)
        | <span data-count="0">_</span> -&gt; json
      in
      let json =
        if with_breadcrumbs then
          <span data-count="0">l</span>et crumbs =
            List.rev_map (fun crumb -&gt; <span data-count="0">`</span>Int crumb) (List.re<span data-count="0">v</span> breadcrumbs)
          in
          <span data-count="0">m</span>atch json with
          | <span data-count="0">`</span>Assoc fields -&gt; `Assoc (fields @ [ ("breadcrumbs", `List crumbs) ])
          | <span data-count="0">_</span> -&gt; json
        else <span data-count="0">j</span>son
      in
      let json =
        match json with
        | <span data-count="0">`</span>Assoc fields when Log.is_bench_enable<span data-count="0">d</span> () -&gt;
          <span data-count="0">l</span>et solver_stats_json : Yojson.Basic.t =
            `Assoc
              (Solver.fold_stat<span data-count="0">s</span>
                 (fun id v acc -&gt;
                   <span data-count="0">m</span>atch v with
                   | <span data-count="0">`</span>Int i -&gt; (id, `Int i) :: acc
                   | <span data-count="0">`</span>Float f -&gt; (id, `Float f) :: acc )
                 stats [] )
          in
          `Assoc (("solver_stats", solver_stats_json) :: fields)
        | <span data-count="0">_</span> -&gt; json
      in
      Yojson.Basic.pretty_print fmt json
    | <span data-count="237">S</span>cfg -&gt;
      let scfg = Symbol_scope.to_scfg ~no_value model scoped_values in
      <span data-count="237">l</span>et model = Scfg.Query.get_dir_exn "model" scfg in
      <span data-count="237">l</span>et lbls =
        { Scfg.Types.name = "labels"
        ; params = []
        ; children =
            List.ma<span data-count="237">p</span>
              (fun (id, lbl_name) -&gt;
                <span data-count="2">{</span> Scfg.Types.name = "label"
                ; params = [ string_of_in<span data-count="2">t</span> id; lbl_name ]
                ; children = []
                } )
              labels
        }
      in
      let bcrumbs =
        if with_breadcrumbs then
          <span data-count="1">[</span> { Scfg.Types.name = "breadcrumbs"
            ; params = List.ma<span data-count="1">p</span> string_of_int (List.re<span data-count="1">v</span> breadcrumbs)
            ; children = []
            }
          ]
        else <span data-count="236">[</span>]
      in
      let bcrumbs =
        if Log.is_bench_enabled () then
          <span data-count="2">l</span>et stats =
            { Scfg.Types.name = "solver_stats"
            ; params = []
            ; children =
                Solver.fold_stat<span data-count="2">s</span>
                  (fun id v acc -&gt;
                    <span data-count="26">l</span>et params =
                      match v with
                      | <span data-count="22">`</span>Int i -&gt; [ id; string_of_in<span data-count="22">t</span> i ]
                      | <span data-count="4">`</span>Float f -&gt; [ id; string_of_floa<span data-count="4">t</span> f ]
                    in
                    { Scfg.Types.name = "stat"; params; children = [] } :: acc )
                  stats []
            }
          in
          stats :: bcrumbs
        else <span data-count="235">b</span>crumbs
      in
      let ret =
        model
        :: (if List.lengt<span data-count="237">h</span> lbls.children &gt; 0 then <span data-count="2">l</span>bls :: bcrumbs else <span data-count="235">b</span>crumbs)
      in
      Scfg.Pp.config fmt ret
  in
  let to_file path model labels breadcrumbs symbol_scopes stats =
    <span data-count="3">l</span>et model_ext = match model_format with <span data-count="0">J</span>son -&gt; "json" | <span data-count="3">S</span>cfg -&gt; "scfg" in
    let contains_ext =
      Fpath.has_ex<span data-count="3">t</span> ".json" pat<span data-count="0">h</span> || Fpath.has_ex<span data-count="3">t</span> ".scfg" pat<span data-count="1">h</span>
    in
    let* path =
      let* () =
        if contains_ext &amp;&amp; (<span data-count="1">n</span>o<span data-count="1">t</span> @@ Fpath.has_ex<span data-count="1">t</span> model_ext path) then
          <span data-count="0">F</span>mt.error_ms<span data-count="0">g</span>
            "Given model file extension is not compatible with the current \
             model format"
        else <span data-count="3">O</span>k ()
      in
      <span data-count="3">l</span>et path = Fpath.to_string @@ Fpath.rem_ex<span data-count="3">t</span> path in
      <span data-count="3">l</span>et base =
        Fpath.v (if no_stop_at_failure then <span data-count="2">F</span>mt.st<span data-count="2">r</span> "%s_%d" path id else <span data-count="1">p</span>ath)
      in
      <span data-count="3">O</span>k (Fpath.add_ex<span data-count="3">t</span> model_ext base)
    in
    <span data-count="3">B</span>os.OS.File.writef path "%a" pp
      (model, labels, breadcrumbs, symbol_scopes, stats)
  in
  let output model labels breadcrumbs symbol_scopes stats =
    <span data-count="237">m</span>atch model_out_file with
    | <span data-count="3">S</span>ome path -&gt; to_file path model labels breadcrumbs symbol_scopes stats
    | <span data-count="234">N</span>one -&gt; begin
      Log.app (fun m -&gt;
        <span data-count="234">l</span>et fmt = m (if no_stop_at_failure then <span data-count="181">"</span>%a@." else <span data-count="53">"</span>%a") in
        <span data-count="234">f</span>mt pp (model, labels, breadcrumbs, symbol_scopes, stats) );
      <span data-count="234">O</span>k ()
    end
  in
  match bug with
  | <span data-count="174">`</span>ETrap (tr, model, labels, breadcrumbs, symbol_scopes, stats) -&gt;
    Log.err (fun m -&gt; <span data-count="174">m</span> "Trap: %s" (Result.err_to_strin<span data-count="174">g</span> tr));
    <span data-count="174">o</span>utput model labels breadcrumbs symbol_scopes stats
  | <span data-count="63">`</span>EAssert (assertion, model, labels, breadcrumbs, symbol_scopes, stats) -&gt;
    if no_assert_failure_expression_printing then
      <span data-count="12">L</span>og.er<span data-count="12">r</span> (fun m -&gt; <span data-count="12">m</span> "Assert failure")
    else <span data-count="51">L</span>og.er<span data-count="51">r</span> (fun m -&gt; <span data-count="51">m</span> "Assert failure: %a" Expr.pp assertion);
    output model labels breadcrumbs symbol_scopes stats

let print_and_count_failures ~model_format ~model_out_file ~no_value
  ~no_assert_failure_expression_printing ~workspace ~no_stop_at_failure
  ~count_acc ~results ~with_breadcrumbs =
  <span data-count="400">l</span>et test_suite_dir = Fpath.(workspace / "test-suite") in
  let* (_created : bool) =
    if not no_value then <span data-count="287">O</span>S.Dir.creat<span data-count="287">e</span> test_suite_dir else <span data-count="113">O</span>k false
  in

  <span data-count="400">l</span>et rec aux count_acc results =
    <span data-count="583">m</span>atch results () with
    | <span data-count="346">S</span>eq.Nil -&gt; Ok count_acc
    | <span data-count="237">S</span>eq.Cons ((result, _thread), tl) -&gt;
      let* model =
        match result with
        | (<span data-count="63">`</span>EAssert (_, model, _, _, _, _) | <span data-count="174">`</span>ETrap (_, model, _, _, _, _)) as
          bug -&gt;
          let* () =
            print_bu<span data-count="237">g</span> ~model_format ~model_out_file ~id:count_acc ~no_value
              ~no_stop_at_failure ~no_assert_failure_expression_printing
              ~with_breadcrumbs bug
          in
          <span data-count="237">O</span>k model
        | <span data-count="0">`</span>Error e -&gt; Error e
      in
      <span data-count="237">l</span>et count_acc = succ count_acc in
      <span data-count="237">l</span>et* () =
        if not no_value then
          <span data-count="119">l</span>et testcase = Smtml.Model.get_bindings model |&gt; <span data-count="119">L</span>ist.map snd in
          <span data-count="119">C</span>md_utils.write_testcas<span data-count="119">e</span> ~dir:test_suite_dir testcase
        else <span data-count="118">O</span>k ()
      in
      <span data-count="237">i</span>f no_stop_at_failure then <span data-count="183">a</span>ux count_acc tl else <span data-count="54">O</span>k count_acc
  in
  aux count_acc results

let sort_results deterministic_result_order results =
  <span data-count="400">i</span>f deterministic_result_order then
    <span data-count="35">r</span>esults
    |&gt; Seq.map (function <span data-count="44">(</span>_, thread) as x -&gt;
      (x, List.re<span data-count="44">v</span> @@ Thread_with_memory.breadcrumb<span data-count="44">s</span> thread) )
    |&gt; <span data-count="35">L</span>ist.of_seq
    |&gt; <span data-count="35">L</span>ist.sort (fun (_, bc1) (_, bc2) -&gt; <span data-count="15">L</span>ist.compare compare bc1 bc2)
    |&gt; <span data-count="35">L</span>ist.to_seq |&gt; <span data-count="35">S</span>eq.map fst
  else <span data-count="365">r</span>esults

let handle_result ~exploration_strategy ~workers ~no_stop_at_failure ~no_value
  ~no_assert_failure_expression_printing ~deterministic_result_order ~fail_mode
  ~workspace ~solver ~model_format ~model_out_file ~with_breadcrumbs ~run_time
  (result : unit Symbolic.Choice.t) =
  <span data-count="400">l</span>et thread = Thread_with_memory.init () in
  <span data-count="400">l</span>et res_stack = Ws.make () in
  <span data-count="400">l</span>et path_count = Atomic.make 0 in
  <span data-count="400">l</span>et callback v =
    <span data-count="1777">l</span>et open Symbolic_choice_intf in
    Atomic.incr path_count;
    <span data-count="1778">m</span>atch (fail_mode, v) with
    | <span data-count="1538">_</span>, (EVal (), _) -&gt; ()
    | <span data-count="174">(</span> (<span data-count="174">B</span>oth | <span data-count="0">T</span>rap_only)
      , (ETrap (t, m, labels, breadcrumbs, symbol_scopes, stats), thread) ) -&gt;
      Ws.push
        (`ETrap (t, m, labels, breadcrumbs, symbol_scopes, stats), thread)
        Prio.default res_stack
    | <span data-count="64">(</span> (<span data-count="61">B</span>oth | <span data-count="3">A</span>ssertion_only)
      , (EAssert (e, m, labels, breadcrumbs, symbol_scopes, stats), thread) ) -&gt;
      Ws.push
        (`EAssert (e, m, labels, breadcrumbs, symbol_scopes, stats), thread)
        Prio.default res_stack
    | <span data-count="3">(</span><span data-count="0">T</span>rap_only | <span data-count="3">A</span>ssertion_only), _ -&gt; ()
  in
  let time_counter = Mtime_clock.counter () in
  <span data-count="400">l</span>et results, interpreter_time =
    let time_before = (Unix.time<span data-count="400">s</span> ()).tms_utime in
    let join_handles =
      Symbolic_choice_with_memory.run
        ( match exploration_strategy with
        | <span data-count="0">L</span>IFO -&gt; (module Ws)
        | <span data-count="400">F</span>IFO -&gt; (module Wq)
        | <span data-count="0">R</span>andom -&gt; (module Wq_random)
        | <span data-count="0">S</span>mart -&gt; (module Wpq) )
        ~workers solver result thread ~callback
        ~callback_init:(fun () -&gt; <span data-count="774">W</span>s.make_pledge res_stack)
        ~callback_end:(fun () -&gt; <span data-count="747">W</span>s.end_pledge res_stack)
    in
    <span data-count="400">l</span>et results =
      Ws.read_as_seq res_stack ~finalizer:(fun () -&gt;
        <span data-count="346">A</span>rray.iter Domain.join join_handles )
    in
    <span data-count="400">l</span>et time_after = (Unix.time<span data-count="400">s</span> ()).tms_utime in
    (results, time_after -. time_before)
  in
  let results = sort_results deterministic_result_order results in
  <span data-count="400">L</span>og.bench (fun m -&gt;
    <span data-count="1">m</span> "execution time: %a" Mtime.Span.pp (Mtime_clock.coun<span data-count="1">t</span> time_counter) );
  <span data-count="400">l</span>et* count =
    print_and_count_failures ~model_format ~model_out_file ~no_value
      ~no_assert_failure_expression_printing ~workspace ~no_stop_at_failure
      ~count_acc:0 ~results ~with_breadcrumbs
  in
  <span data-count="400">L</span>og.info (fun m -&gt; <span data-count="2">m</span> "Completed paths: %d" (Atomic.ge<span data-count="2">t</span> path_count));

  <span data-count="400">L</span>og.bench (fun m -&gt;
    <span data-count="1">l</span>et bench_stats = Thread_with_memory.bench_stats thread in
    (* run_time shouldn't be none in bench mode *)
    <span data-count="1">l</span>et run_time = match run_time with None -&gt; assert false | <span data-count="1">S</span>ome t -&gt; t in
    m "Benchmarks:@\n@[&lt;v&gt;solver time: %a@;interpreter time: %fms@;@]"
      Mtime.Span.pp
      (Atomic.ge<span data-count="1">t</span> bench_stats.solver_time)
      ((interpreter_time +. run_time) *. 1000.) );

  <span data-count="400">l</span>et+ () = if count &gt; 0 then <span data-count="222">E</span>rror (`Found_bug count) else <span data-count="178">O</span>k () in
  <span data-count="178">L</span>og.app (fun m -&gt; <span data-count="178">m</span> "All OK!")

(* NB: This function propagates potential errors (Result.err) occurring
             during evaluation (OS, syntax error, etc.), except for Trap and Assert,
             which are handled here. Most of the computations are done in the Result
             monad, hence the let*. *)
let cmd ~parameters ~source_file =
  <span data-count="399">l</span>et* result, run_time = run_file ~parameters ~source_file in

  <span data-count="397">l</span>et { exploration_strategy
      ; fail_mode
      ; workers
      ; solver
      ; deterministic_result_order
      ; model_format
      ; no_value
      ; no_assert_failure_expression_printing
      ; workspace
      ; model_out_file
      ; with_breadcrumbs
      ; _
      } =
    parameters
  in

  (* deterministic_result_order implies no_stop_at_failure *)
  let no_stop_at_failure =
    parameters.deterministic_result_orde<span data-count="35">r</span> || parameters.no_stop_at_failur<span data-count="137">e</span>
  in

  (* TODO: can we handle this at the cmdliner level? *)
  let* workspace =
    match workspace with
    | <span data-count="214">S</span>ome path -&gt; Ok path
    | <span data-count="183">N</span>one -&gt; OS.Dir.tm<span data-count="183">p</span> "owi_sym_%s"
  in

  <span data-count="397">h</span>andle_result ~exploration_strategy ~fail_mode ~workers ~solver
    ~deterministic_result_order ~model_format ~no_value
    ~no_assert_failure_expression_printing ~workspace ~no_stop_at_failure
    ~model_out_file ~with_breadcrumbs ~run_time result
</code></pre>
      </div>
    </div>
    <script src="../../coverage.js"></script>
  </body>
</html>
