<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Link (owi.Owi.Link)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">owi</a> &#x00BB; <a href="../index.html">Owi</a> &#x00BB; Link</nav><header class="odoc-preamble"><h1>Module <code><span>Owi.Link</span></code></h1><p>Module to link a binary/extern module and producing a runnable module along with a link state.</p></header><div class="odoc-content"><p>runtime env</p><div class="odoc-spec"><div class="spec type anchored" id="type-module_to_run"><a href="#type-module_to_run" class="anchor"></a><code><span><span class="keyword">type</span> <span>'f module_to_run</span></span><span> = </span><span>{</span></code><ol><li id="type-module_to_run.id" class="def record field anchored"><a href="#type-module_to_run.id" class="anchor"></a><code><span>id : <span>string option</span>;</span></code></li><li id="type-module_to_run.env" class="def record field anchored"><a href="#type-module_to_run.env" class="anchor"></a><code><span>env : <span><span class="type-var">'f</span> <a href="../Link_env/index.html#type-t">Link_env.t</a></span>;</span></code></li><li id="type-module_to_run.to_run" class="def record field anchored"><a href="#type-module_to_run.to_run" class="anchor"></a><code><span>to_run : <span><span><span><a href="../Types/index.html#type-binary">Types.binary</a> <a href="../Types/index.html#type-expr">Types.expr</a></span> <a href="../Annotated/index.html#type-t">Annotated.t</a></span> list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>runnable module</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-StringMap"><a href="#module-StringMap" class="anchor"></a><code><span><span class="keyword">module</span> StringMap</span><span> : <span class="xref-unresolved">Prelude</span>.Map.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">key</span> = <span class="xref-unresolved">string</span></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-StringSet"><a href="#module-StringSet" class="anchor"></a><code><span><span class="keyword">module</span> StringSet</span><span> : <span class="xref-unresolved">Prelude</span>.Set.S</span></code></div></div><div class="odoc-spec"><div class="spec type subst anchored" id="type-func"><a href="#type-func" class="anchor"></a><code><span><span class="keyword">type</span> func</span><span> := <a href="../Func_intf/index.html#type-t">Func_intf.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-exports"><a href="#type-exports" class="anchor"></a><code><span><span class="keyword">type</span> exports</span><span> = </span><span>{</span></code><ol><li id="type-exports.globals" class="def record field anchored"><a href="#type-exports.globals" class="anchor"></a><code><span>globals : <span><a href="../Concrete_global/index.html#type-t">Concrete_global.t</a> <span class="xref-unresolved">StringMap</span>.t</span>;</span></code></li><li id="type-exports.memories" class="def record field anchored"><a href="#type-exports.memories" class="anchor"></a><code><span>memories : <span><a href="../Concrete_memory/index.html#type-t">Concrete_memory.t</a> <span class="xref-unresolved">StringMap</span>.t</span>;</span></code></li><li id="type-exports.tables" class="def record field anchored"><a href="#type-exports.tables" class="anchor"></a><code><span>tables : <span><a href="../Concrete_table/index.html#type-t">Concrete_table.t</a> <span class="xref-unresolved">StringMap</span>.t</span>;</span></code></li><li id="type-exports.functions" class="def record field anchored"><a href="#type-exports.functions" class="anchor"></a><code><span>functions : <span><a href="#type-func">func</a> <span class="xref-unresolved">StringMap</span>.t</span>;</span></code></li><li id="type-exports.defined_names" class="def record field anchored"><a href="#type-exports.defined_names" class="anchor"></a><code><span>defined_names : <span class="xref-unresolved">StringSet</span>.t;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>runtime exported items</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-envs"><a href="#type-envs" class="anchor"></a><code><span><span class="keyword">type</span> <span>'ext envs</span></span><span> = <span><span><span class="type-var">'ext</span> <a href="../Link_env/index.html#type-t">Link_env.t</a></span> <a href="../Env_id/index.html#type-collection">Env_id.collection</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fenvs"><a href="#type-fenvs" class="anchor"></a><code><span><span class="keyword">type</span> fenvs</span><span> = <span><span><a href="../Concrete_extern_func/index.html#type-extern_func">Concrete_extern_func.extern_func</a> <a href="../Link_env/index.html#type-t">Link_env.t</a></span> <a href="../Env_id/index.html#type-collection">Env_id.collection</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-state"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">type</span> <span>'f state</span></span><span> = </span><span>{</span></code><ol><li id="type-state.by_name" class="def record field anchored"><a href="#type-state.by_name" class="anchor"></a><code><span>by_name : <span><a href="#type-exports">exports</a> <span class="xref-unresolved">StringMap</span>.t</span>;</span></code></li><li id="type-state.by_id" class="def record field anchored"><a href="#type-state.by_id" class="anchor"></a><code><span>by_id : <span><span>(<a href="#type-exports">exports</a> * <a href="../Env_id/index.html#type-t">Env_id.t</a>)</span> <span class="xref-unresolved">StringMap</span>.t</span>;</span></code></li><li id="type-state.last" class="def record field anchored"><a href="#type-state.last" class="anchor"></a><code><span>last : <span><span>(<a href="#type-exports">exports</a> * <a href="../Env_id/index.html#type-t">Env_id.t</a>)</span> option</span>;</span></code></li><li id="type-state.collection" class="def record field anchored"><a href="#type-state.collection" class="anchor"></a><code><span>collection : <span><span class="type-var">'f</span> <a href="../Func_id/index.html#type-collection">Func_id.collection</a></span>;</span></code></li><li id="type-state.envs" class="def record field anchored"><a href="#type-state.envs" class="anchor"></a><code><span>envs : <span><span class="type-var">'f</span> <a href="#type-envs">envs</a></span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>link state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_state"><a href="#val-empty_state" class="anchor"></a><code><span><span class="keyword">val</span> empty_state : <span><span class="type-var">'f</span> <a href="#type-state">state</a></span></span></code></div><div class="spec-doc"><p>the empty link state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-modul"><a href="#val-modul" class="anchor"></a><code><span><span class="keyword">val</span> modul : 
  <span><span><span class="type-var">'f</span> <a href="#type-state">state</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">name</span>:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Binary/Module/index.html#type-t">Binary.Module.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'f</span> <a href="#type-module_to_run">module_to_run</a></span> * <span><span class="type-var">'f</span> <a href="#type-state">state</a></span>)</span> <a href="../Result/index.html#type-t">Result.t</a></span></span></code></div><div class="spec-doc"><p>link a module with a given link state, producing a runnable module and a new link state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_module"><a href="#val-register_module" class="anchor"></a><code><span><span class="keyword">val</span> register_module : 
  <span><span><span class="type-var">'f</span> <a href="#type-state">state</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">id</span>:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-state">state</a></span> <a href="../Result/index.html#type-t">Result.t</a></span></span></code></div><div class="spec-doc"><p>register a module inside a link state, producing a new link state</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-extern_module"><a href="#type-extern_module" class="anchor"></a><code><span><span class="keyword">type</span> <span>'extern_func extern_module</span></span><span> = </span><span>{</span></code><ol><li id="type-extern_module.functions" class="def record field anchored"><a href="#type-extern_module.functions" class="anchor"></a><code><span>functions : <span><span>(string * <span class="type-var">'extern_func</span>)</span> list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>extern modules</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extern_module'"><a href="#val-extern_module'" class="anchor"></a><code><span><span class="keyword">val</span> extern_module' : 
  <span><span><span class="type-var">'f</span> <a href="#type-state">state</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">func_typ</span>:<span>(<span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Types/index.html#type-binary">Types.binary</a> <a href="../Types/index.html#type-func_type">Types.func_type</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-extern_module">extern_module</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <a href="#type-state">state</a></span></span></code></div><div class="spec-doc"><p>register an extern module with a given link state, producing a new link state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extern_module"><a href="#val-extern_module" class="anchor"></a><code><span><span class="keyword">val</span> extern_module : 
  <span><span><a href="../Concrete_extern_func/index.html#type-extern_func">Concrete_extern_func.extern_func</a> <a href="#type-state">state</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Concrete_extern_func/index.html#type-extern_func">Concrete_extern_func.extern_func</a> <a href="#type-extern_module">extern_module</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Concrete_extern_func/index.html#type-extern_func">Concrete_extern_func.extern_func</a> <a href="#type-state">state</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-extern_func"><a href="#type-extern_func" class="anchor"></a><code><span><span class="keyword">type</span> extern_func</span><span> = <span><a href="../Concrete_extern_func/index.html#type-extern_func">Concrete_extern_func.extern_func</a> <a href="../Func_id/index.html#type-collection">Func_id.collection</a></span></span></code></div></div></div></body></html>
